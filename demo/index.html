<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <!--meta http-equiv="refresh" content="1;url="-->
    <title>Draggable and Risizable Dialog Box</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="ZulNs">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="robots" content="all">
    <meta name="copyright" content="ZulNs">
    <!--link rel="icon" href="favicon.ico" type="image/x-icon" /-->
    <!--link rel="icon" href="favicon.png" type="image/png" /-->
</head>
<body>
<!-- HTML here... -->
<p>
    <button onclick="showIframeDialog();">Show IFRAME Dialog</button>
    <button onclick="showTextDialog();">Show TEXT Dialog</button>
    <button onclick="showHtmlDialog();">Show HTML Dialog</button>
    <button onclick="showHtmlDialogAsync();">Show HTML Dialog (async)</button>
    <button onclick="showDialogWithNoButtons();">Show Dialog with NO buttons</button>
    <button onclick="showRefreshingDialog();">Show Refreshing Dialog</button>
</p>
<link rel="stylesheet" href="../dist/toolwindow.css"/>
<script type="text/javascript" src="../dist/toolwindow.js"></script>
<script type="text/javascript">
  var
    refreshingDialog,
    noButtonsDialog,
    iframeDialog,
    textDialog,
    htmlDialog,
    htmlDialogAsync,
    asyncCount = 0,
    bacon = "Bacon ipsum dolor amet hamburger bacon pork turkey pig, short ribs burgdoggen chicken doner pork belly meatball. Jerky pork loin buffalo, ground round short loin corned beef bresaola burgdoggen turkey. Beef sausage porchetta, drumstick buffalo jerky meatloaf. Drumstick prosciutto chuck swine. Shankle porchetta tri-tip cupim biltong beef ribs cow picanha corned beef pork chop tongue doner meatball ribeye. Picanha buffalo flank, ribeye turkey pastrami chuck. Bacon ipsum dolor amet hamburger bacon pork turkey pig, short ribs burgdoggen chicken doner pork belly meatball. Jerky pork loin buffalo, ground round short loin corned beef bresaola burgdoggen turkey. Beef sausage porchetta, drumstick buffalo jerky meatloaf. Drumstick prosciutto chuck swine. Shankle porchetta tri-tip cupim biltong beef ribs cow picanha corned beef pork chop tongue doner meatball ribeye. Picanha buffalo flank, ribeye turkey pastrami chuck.";

  function showRefreshingDialog() {
    refreshingDialog = refreshingDialog || new ToolWindow({
      title: "Refreshing window",
      content: {
        type: "text",
        value: () => "Counter is: "
      },
      buttons: [{
        text: "Increment counter",
        clicked: function() {
          // note that
          if (this.__counter === undefined) {
            this.__counter = 0;
          }
          this.__counter++;
          this.content.value = "Counter is: " + this.__counter;
          this.refresh();
        }
      }, {
        text: "Get a face",
        clicked: function() {
          this.content = {
            type: "url",
            value: "http://thispersondoesnotexist.com"
          };
          this.refresh();
        }
      }]
    });
    refreshingDialog.show();
  }

  function showDialogWithNoButtons() {
    noButtonsDialog = noButtonsDialog || new ToolWindow({
      title: "Look, Ma! No Buttons!",
      left: 250,
      top: 400,
      minWidth: 400,
      minHeight: 100,
      content: {
        type: "text",
        value: bacon
      },
      buttons: []
    });
    noButtonsDialog.show();
  }

  function showIframeDialog() {
    iframeDialog = iframeDialog || new ToolWindow({
      title: "Demo Tool Window",
      left: 50,
      top: 100,
      minWidth: 640,
      minHeight: 480,
      content: {
        type: "url",
        value: "https://localhost:44303/#/app"
      },
      buttons: [
        {
          text: "Refresh",
          clicked: function () {
            this.refresh();
          }
        },
        {
          text: "Dismiss",
          clicked: function () {
            this.hide()
          }
        }
      ],
    });
    iframeDialog.show();
  }

  function showTextDialog() {
    textDialog = textDialog || new ToolWindow({
      title: "Demo Tool Window",
      top: 200,
      left: 150,
      content: {
        type: "text",
        value: bacon
      },
    });
    textDialog.show();
  }

  function showHtmlDialog() {
    htmlDialog = htmlDialog || new ToolWindow({
      title: "Demo Tool Window",
      buttons: [
        {
          text: "Do stuff",
          clicked: function (evt) {
            alert("clicked! See console log for event and context info.");
            console.log({
              context: this,
              evt
            });
          }
        },
        {
          text: "Dismiss",
          clicked: function () {
            this.hide();
          }
        }
      ],
      top: 300,
      left: 350,
      content: {
        type: "html",
        value: "<html lang=\"en\"><head><title></title></title></head><body><h2>HTML Content!</h2><p>" + bacon + "</p></body></html>"
      },
    });
    htmlDialog.show();
  }

  function showHtmlDialogAsync() {
    htmlDialogAsync = htmlDialogAsync || new ToolWindow({
      title: "Demo Tool Window",
      buttons: [
        {
          text: "Do stuff",
          clicked: function (evt) {
            alert("clicked! See console log for event and context info.");
            console.log({
              context: this,
              evt
            });
          }
        },
        {
          text: "Refresh",
          clicked: function () {
            this.refresh();
          }
        },
        {
          text: "Dismiss",
          clicked: function () {
            this.hide();
          }
        }
      ],
      top: 300,
      left: 350,
      content: {
        type: "html",
        value: function () {
          return new Promise(function (resolve) {
            resolve("<html lang=\"en\"><head><title></title></title></head><body><h2>HTML Content [ refreshed: " + (++asyncCount) + " time" + (asyncCount === 1 ? "" : "s") + "]!</h2><p>" + bacon + "</p></body></html>");
          });
        }
      },
    });
    htmlDialogAsync.show();
  }


</script>
</body>
</html>
